import{j as e}from"./index-1254aa7c.js";import{r as t}from"./vendor-34749a99.js";import{L as r}from"./router-95e30238.js";import{c as i}from"./utils-b3c35dc8.js";const o=t.memo(({src:r,alt:o,className:s,width:a,height:n,placeholder:c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+",onLoad:l,onError:m})=>{const[d,p]=t.useState(!1),[h,g]=t.useState(!1),[u,f]=function({threshold:e=0,root:r=null,rootMargin:i="0%",freezeOnceVisible:o=!1}={}){const[s,a]=t.useState(),[n,c]=t.useState(null),l=t.useRef(null),m=s?.isIntersecting&&o;return t.useEffect(()=>{if(l.current&&l.current.disconnect(),m||!n)return;const t={threshold:e,root:r,rootMargin:i};return window.IntersectionObserver?(l.current=new IntersectionObserver(([e])=>a(e),t),l.current.observe(n),()=>l.current?.disconnect()):void 0},[n,e,r,i,m]),[e=>{c(e)},!!s?.isIntersecting,s]}({threshold:.1,freezeOnceVisible:!0});return e.jsxs("div",{ref:u,className:i("lazy-image",{loading:!d&&!h,loaded:d,error:h},s),style:{width:a?`${a}px`:"100%",height:n?`${n}px`:"auto",aspectRatio:a&&n?`${a}/${n}`:void 0},children:[f&&!h&&e.jsx("img",{src:d?r:c,alt:o,width:a,height:n,onLoad:()=>{p(!0),l?.()},onError:()=>{g(!0),m?.()},loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"cover",transition:"opacity 0.3s ease-in-out",opacity:d?1:.6}}),h&&e.jsx("div",{className:"error-placeholder",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",backgroundColor:"#f0f0f0",color:"#666",fontSize:"14px"},children:"Failed to load image"})]})});o.displayName="LazyImage";const s=t.memo(({product:t,className:s,priority:a=!1})=>{const{id:n,name:c,description:l,price:m,rating:d,reviewCount:p,inStock:h,imageUrl:g,thumbnailUrl:u}=t,f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m),x=Array.from({length:5},(e,t)=>t<Math.floor(d));return e.jsx("article",{className:i("card product-card contain-layout",s),itemScope:!0,itemType:"https://schema.org/Product",children:e.jsxs(r,{to:`/products/${n}`,className:"product-link",style:{textDecoration:"none",color:"inherit"},children:[e.jsxs("div",{className:"product-image-container",style:{position:"relative",marginBottom:"1rem"},children:[e.jsx(o,{src:u||g,alt:c,width:300,height:200,className:"product-image"}),e.jsx("div",{className:i("stock-badge",h?"in-stock":"out-of-stock"),style:{position:"absolute",top:"0.5rem",right:"0.5rem",padding:"0.25rem 0.5rem",borderRadius:"var(--border-radius)",fontSize:"0.75rem",fontWeight:"600",backgroundColor:h?"var(--color-success)":"var(--color-error)",color:"white"},children:h?"In Stock":"Out of Stock"})]}),e.jsxs("div",{className:"product-info",children:[e.jsx("h3",{className:"product-name",itemProp:"name",style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:c}),e.jsx("p",{className:"product-description",itemProp:"description",style:{color:"var(--color-text-light)",fontSize:"0.875rem",marginBottom:"0.75rem",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:l}),e.jsxs("div",{className:"product-rating",style:{display:"flex",alignItems:"center",marginBottom:"0.75rem"},itemProp:"aggregateRating",itemScope:!0,itemType:"https://schema.org/AggregateRating",children:[e.jsx("div",{className:"stars",style:{display:"flex",marginRight:"0.5rem"},children:x.map((t,r)=>e.jsx("span",{style:{color:t?"#fbbf24":"#d1d5db",fontSize:"1rem"},children:"â˜…"},r))}),e.jsxs("span",{className:"rating-text",style:{fontSize:"0.875rem",color:"var(--color-text-light)"},children:[e.jsx("span",{itemProp:"ratingValue",children:d.toFixed(1)}),"(",e.jsx("span",{itemProp:"reviewCount",children:p})," reviews)"]})]}),e.jsxs("div",{className:"product-price",itemProp:"offers",itemScope:!0,itemType:"https://schema.org/Offer",style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--color-primary)"},children:[e.jsx("span",{itemProp:"price",content:m.toString(),children:f}),e.jsx("meta",{itemProp:"priceCurrency",content:"USD"}),e.jsx("meta",{itemProp:"availability",content:h?"https://schema.org/InStock":"https://schema.org/OutOfStock"})]})]})]})})});s.displayName="ProductCard";export{o as L,s as P};
